* 메시지가 어떻게 흘러가는가
* HTTP 메시지의 세 부분(시작줄, 헤더, 개체 본문)
* 요청과 응답 메시지의 차이
* 요청 메시지가 지원하는 여러 기능(메서드)들
* 응답 메시지가 반환하는 여러 상태 코드들
* 여러 HTTP 헤더들은 무슨 일을 하는가

## 3.1 메시지의 흐름
* 메시지가 어떻게 흘러가는가
* HTTP 메시지의 세 부분(시작줄, 헤더, 개체 본문)
* 요청과 응답 메시지의 차이
* 요청 메시지가 지원하는 여러 기능(메서드)들
* 응답 메시지가 반환하는 여러 상태 코드들
* 여러 HTTP 헤더들은 무슨 일을 하는가

## 3.1 메시지의 흐름

HTTP 메시지는 HTTP 애플리케이션 간에 주고받은 데이터의 블록들이다. 이 메시지는 클라이언트, 서버, 프락시 사이를 흐른다.

### 3.1.1 메시지는 원 서버 방향을 인바운드로 하여 송신된다. 

* 인바인드(서버 방향)
* 아웃바인드(사용자 에이전트 방향)

### 3.1.2 다운스트림으로 흐르는 메시지

*HTTP 메시지는 요청이나 응답이나 관계없이 다운스트림으로 흐른다.* 메시지의 발송자는 수신자의 업스트림이다. 
Ex) 요청에서 프락시1이 프락시3의 업스트림이지만 응답에서는 프락시3의 다운스트림이다.

## 3.2 메시지의 각 부분

메시지는 시작줄, 헤더블록, 본문 이렇게 세 부분으로 이루어진다.


시작줄과 헤더는 그냥 줄 단위로 분리된 아스키 문자열이다. 
메시지 본문은 단순히 선택적인 데이터 덩어리이다. 텍스트나 이진 데이터를 포함할 수도 있고, 그냥 비어있을 수도 있다.

### 3.2.1 메시지 문법

모든 HTTP 메시지는 요청 메시지나 응답 메시지로 분류된다. 모두 기본적으로 구조가 같다.

- 요청 메시지 

```
GET /specials/saw.gif HTTP/1.0
Host: www.test.com

<메서드> <요청 URL> <버전>
<헤더>

<엔티티 본문>

```

모든 필드는 공백으로 구분한다. 

- 응답 메시지

 ```
HTTP/1.0 200 OK
Content-Type: image/gif
Content-Length: 8527

<버전> <상태 코드> <사유 구절>
<헤더>

<엔터티 본문>
```

### 3.2.2 시작줄

모든 HTTP 메시지는 시작줄로 시작한다. 요청 메시지의 시작줄은 무엇을 해야 하는지 말해준다. 응답 메시지의 시작줄은 무슨 일이 일어났는지 말해준다. 

<메서드> <요청 URL> <버전> / <버전> <상태 코드> <사유 구절>

### 3.2.3 헤더

시작줄 다음에는 0개 이상의 HTTP 헤더가 온다. 

HTTP 헤더 필드는 요청과 응답 메시지에 추가 정보를 더한다.  기본적으로 이름/값 쌍의 목록이다. 

긴 헤더 줄은 여러 줄로 쪼개서 모낼 수 있는데, 추가 줄 앞에는 최소 하나의 스페이스 혹은 탭 문자가 와야 한다.

```
HTTP/1.0 200 OK
Server: Test Server
 Verson 1.0
```

-> Server 헤더의 완전한 값은 ‘Test Server Version 1.0’ 이다. 

#### 헤더 분류

HTTP 헤더는 다음과 같이 분류한다.

##### 일반 헤더

요청과 응답 양쪽에 모두 나타날 수 있음 

```
Date: Tue, 3 Oct 1974 02:16:00 GMT
```

=> 서버와 클라이언트를 가리지 않고, 메시지가 만들어진 일시를 지정하기 위해 사용하는 일반 목적 헤더이다. 

##### 요청 헤더

요청에 대한 부가 정보를 제공. 서버에게 클라이언트가 받고자 하는 데이터의 타입이 무엇인지와 같은 부가 정보를 제공.

```
Accept: */*
```

=> 서버에게 클라이언트가 자신의 요청에 대응하는 어떤 미디어 타입도 받을것임을 의미. 

##### 응답 헤더

응답에 대한 부가 정보를 제공. 클라이언트에게 정보를 제공하기 위한 헤더.

```
Server: Tiki-Hut/1.0
```

=> 클라이언트에게 그가 Tiki-Hut 서버 1.0 버전과 대화하고 있음을 말해준다. 

##### Entity 헤더

본문 크기와 콘텐츠, 혹은 리소스 그 자체를 서술

```
Content-Type: text/html’ charset=iso-latin-1
```

=> 애플리케이션에게 데이터가  iso-latin-1  문자집합으로 된  HTML 문서임을 알려준다.

##### 확장 헤더

명세에 정의되지 않은 새로운 헤더(비표준 헤더)

### 3.2.4 엔터티 본문

HTTP 메시지의 세 번째 부분은 엔터티 본문이다. (선택적) 

이미지, 비디오, 문서, 신용카드 트랜젝션, 전자우편 등 여러 종류의 디지털 데이터를 실어 나를 수 있다. 

## 3.3 메서드

모든 서버가 모든 메서드를 구현하지는 않는다. 

그리고 메서드는 대부분 제한적으로 사용될 것이다. 이 제한은 일반적으로 서버 설정에 의해 정해지며, 따라서 사이트마다 또 서버마다 다를 수 있다. 

(DELETE, PUT 메서드를 지원하더라도 해당 메소드 요청 시 리소스를 삭제할 수 있길 바랄 수 없다.)

### 3.3.1 안전한 메서드 (Safe Method)

HTTP는 안전한 메서드라 불리는 메서드의 집합을 정의한다. 

GET과 HEAD 메서드는 안전하다고 할 수 있는데, 해당 HTTP 요청의 결과로 서버에 어떤 작용도 없기 때문이다. ( 아무 일도 안일어남)

안전한 메서드의 목적은, 서버에 어떤 영향을 줄 수 있는 안전하지 않은 메서드가 사용될 때 

사용자들에게 그 사실을 알려주는  HTTP 애플리케이션을 만들 수 있도록 하는 것에 있다.

EX) 신용카드가 결제된다거나 하는 어떤 일이 일어날 수 있을 때 해당 알림을 경고 하는 메시지를 띄울 수 있다. 

* GET
* HEAD
    * 서버는 응답으로 헤더만을 돌려준다. (GET 응답 시 헤더와 동일한 헤더)
    * 리소스의 형태를 알 수 있다.
    * 응답의 상태 코드를 통해 개체가 존재하는지 확인할 수 있다.
    * 헤더의 확인으로 리소스가 변경되었는지 확인할 수 있다.
* PUT
    * 서버에 문서를 쓴다. 있으면 교체
* POST
    * 서버에 입력 데이터를 전송하기 위해 설계 
    * POST는 서버에 데이터를 보내기 위해 사용. PUT은 서버에 있는 리소스에 데이터를 입력하기 위해 사용
* TRACE
* OPTIONS
    * 지원하는 메소드 목록을 반환한다.
* DELETE

## 3.4 상태 코드

100 - 101 (정의된 범위) :  정보성 상태 코드

200-206: 성공 상태 코드

300-305: 리다이렉션 상태 코드

400-415: 클라이언트 에러 상태 코드

500-505: 서버 에러 상태 코드
